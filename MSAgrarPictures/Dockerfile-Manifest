# Verwende Node 18 mit Alpine als Basis (liefert Node v18 + npm vorinstalliert)
FROM node:18-alpine

EXPOSE 1111

# Installiere Build Tools f√ºr native Module
RUN apk add --no-cache python3 make g++

# Setze Arbeitsverzeichnis
WORKDIR /app

# Kopiere package.json und (optional) package-lock.json
COPY MSAgrarPictures/package.json ./

# Installiere npm dependencies
RUN npm install

# Kopiere alle Manifest-Dateien
COPY MSAgrarPictures/manifest /app/manifest
COPY MSAgrarPictures/.manifest /app/.manifest
COPY MSAgrarPictures/manifest.yml ./

# Standard EntryPoint: npm run manifest
CMD ["npm", "run", "manifest"]
